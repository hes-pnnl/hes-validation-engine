{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://github.com/NREL/hescore-hpxml/blob/master/hescorehpxml/schemas/hescore_json.schema.json",
    "type": "object",
    "title": "HEScore JSON Schema",
    "additionalProperties": false,
    "properties": {
        "version": {
            "type": "string",
            "const": "4.0",
            "description": "The version of the building unit schema. Use semantic versioning."
        },
        "address": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "address": {
                    "type": "string"
                },
                "address2": {
                    "type": [
                        "string",
                        "null"
                    ]
                },
                "city": {
                    "type": "string"
                },
                "state": {
                    "type": "string",
                    "enum": [
                        "AL",
                        "AK",
                        "AZ",
                        "AR",
                        "CA",
                        "CO",
                        "CT",
                        "DE",
                        "FL",
                        "GA",
                        "HI",
                        "ID",
                        "IL",
                        "IN",
                        "IA",
                        "KS",
                        "KY",
                        "LA",
                        "ME",
                        "MD",
                        "MA",
                        "MI",
                        "MN",
                        "MS",
                        "MO",
                        "MT",
                        "NE",
                        "NV",
                        "NH",
                        "NJ",
                        "NM",
                        "NY",
                        "NC",
                        "ND",
                        "OH",
                        "OK",
                        "OR",
                        "PA",
                        "RI",
                        "SC",
                        "SD",
                        "TN",
                        "TX",
                        "UT",
                        "VT",
                        "VA",
                        "WA",
                        "WV",
                        "WI",
                        "WY",
                        "DC"
                    ]
                },
                "zip_code": {
                    "type": "string",
                    "pattern": "^[0-9]{5}$"
                },
                "external_building_id": {
                    "type": "string",
                    "description": " Allows an organization to assign an ID to the building for that organization's internal use. This field has no impact within the HES system, except that it can be filtered on in some of the retrieve_* methods."
                }
            },
            "required": [
                "address",
                "city",
                "state",
                "zip_code"
            ]
        },
        "hpwes": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "improvement_installation_start_date": {
                    "type": "string",
                    "format": "date",
                    "description": "The date on which HPwES upgrade installation began, in YYYY-MM-DD format"
                },
                "improvement_installation_completion_date": {
                    "type": "string",
                    "format": "date",
                    "description": "The date on which HPwES upgrade installation was completed, in YYYY-MM-DD format"
                },
                "contractor_zip_code": {
                    "type": "string",
                    "pattern": "^[0-9]{5}$",
                    "description": "Five-digit postal code of the contractor installing the HPwES upgrades"
                },
                "contractor_business_name": {
                    "type": "string",
                    "description": "The name of the contracting business installing the HPwES upgrades"
                },
                "is_income_eligible_program": {
                    "type": "boolean",
                    "description": "Whether or not the HPwES upgrades were performed for a homeowner participating in an income-eligible program"
                }
            }
        },
        "about": {
            "type": "object",
            "required": [
                "assessment_type",
                "assessment_date",
                "dwelling_unit_type",
                "year_built",
                "number_bedrooms",
                "floor_to_ceiling_height",
                "conditioned_floor_area",
                "orientation",
                "blower_door_test"
            ],
            "additionalProperties": false,
            "properties": {
                "assessment_type": {
                    "type": "string",
                    "enum": [
                        "initial",
                        "final",
                        "qa",
                        "alternative",
                        "test",
                        "corrected",
                        "mentor",
                        "preconstruction"
                    ]
                },
                "assessment_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date the assessment was performed"
                },
                "comments": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "description": "Free text comment field"
                },
                "comment_api_only": {
                    "type": "string",
                    "description": "Pass through field for use by api users"
                },
                "dwelling_unit_type": {
                    "type": "string",
                    "enum": [
                        "single_family_detached",
                        "single_family_attached",
                        "apartment_unit",
                        "manufactured_home"
                    ],
                    "description": "The type of dwelling unit"
                },
                "manufactured_home_sections": {
                    "type": "string",
                    "enum": [
                        "single-wide",
                        "double-wide",
                        "triple-wide"
                    ],
                    "description": "The sections of a manufactured home"
                },
                "year_built": {
                    "type": "integer",
                    "minimum": 1600,
                    "description": "Year building was built"
                },
                "number_bedrooms": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "description": "Number of bedrooms in house"
                },
                "num_floor_above_grade": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 4,
                    "description": "Number of floors above grade. Assumes 1 when dwelling_unit_type is apartment_unit"
                },
                "floor_to_ceiling_height": {
                    "type": "number",
                    "minimum": 6,
                    "maximum": 15,
                    "description": "Floor to ceiling height (feet)"
                },
                "conditioned_floor_area": {
                    "type": "number",
                    "minimum": 250,
                    "maximum": 25000,
                    "description": "Total conditioned floor area (square feet)"
                },
                "orientation": {
                    "type": "string",
                    "enum": [
                        "north",
                        "north_east",
                        "east",
                        "south_east",
                        "south",
                        "south_west",
                        "west",
                        "north_west"
                    ],
                    "description": "Orientation of the front door"
                },
                "blower_door_test": {
                    "type": "boolean",
                    "description": "Was a blower door test performed on this house?"
                },
                "air_sealing_present": {
                    "type": "boolean",
                    "description": "Has the building been air sealed?"
                },
                "envelope_leakage": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 25000,
                    "description": "Building air leakage measured with a blower door (CFM50) (only used if blower_door_test is true)"
                }
            },
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "manufactured_home"
                            }
                        }
                    },
                    "then": {
                        "required": [
                            "manufactured_home_sections"
                        ]
                    },
                    "else": {
                        "not": {
                            "required": [
                                "manufactured_home_sections"
                            ]
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "blower_door_test": {
                                "const": true
                            }
                        }
                    },
                    "then": {
                        "required": [
                            "envelope_leakage"
                        ]
                    },
                    "else": {
                        "not": {
                            "required": [
                                "envelope_leakage"
                            ]
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "dwelling_unit_type": {
                                "enum": [
                                    "apartment_unit",
                                    "manufactured_home"
                                ]
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    },
                    "then": {
                        "not": {
                            "required": [
                                "num_floor_above_grade"
                            ]
                        }
                    },
                    "else": {
                        "required": [
                            "num_floor_above_grade"
                        ]
                    }
                }
            ]
        },
        "zone": {
            "type": "object",
            "required": [
                "zone_roof",
                "zone_floor",
                "zone_wall"
            ],
            "additionalProperties": false,
            "properties": {
                "zone_roof": {
                    "type": "array",
                    "description": "Inputs about the construction of the roof(s)",
                    "additionalItems": false,
                    "minItems": 0,
                    "maxItems": 2,
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "roof_name": {
                                "type": "string",
                                "enum": [
                                    "roof1",
                                    "roof2"
                                ],
                                "description": "Name of this roof instance"
                            },
                            "ceiling_area": {
                                "type": "number",
                                "minimum": 1,
                                "maximum": 25000,
                                "description": "Area of ceiling (attic floor), used if roof_type = vented_attic, below_other_unit"
                            },
                            "roof_area": {
                                "type": "number",
                                "minimum": 1,
                                "maximum": 25000,
                                "description": "Area of the roof, used if roof_type = cath_ceiling, flat_roof, bowstring_roof"
                            },
                            "roof_assembly_code": {
                                "type": "string",
                                "enum": [
                                    "rfwf00co",
                                    "rfwf00wo",
                                    "rfwf00rc",
                                    "rfwf00lc",
                                    "rfwf00tg",
                                    "rfwf03co",
                                    "rfwf03wo",
                                    "rfwf03rc",
                                    "rfwf03lc",
                                    "rfwf03tg",
                                    "rfwf07co",
                                    "rfwf07wo",
                                    "rfwf07rc",
                                    "rfwf07lc",
                                    "rfwf07tg",
                                    "rfwf11co",
                                    "rfwf11wo",
                                    "rfwf11rc",
                                    "rfwf11lc",
                                    "rfwf11tg",
                                    "rfwf13co",
                                    "rfwf13wo",
                                    "rfwf13rc",
                                    "rfwf13lc",
                                    "rfwf13tg",
                                    "rfwf15co",
                                    "rfwf15wo",
                                    "rfwf15rc",
                                    "rfwf15lc",
                                    "rfwf15tg",
                                    "rfwf19co",
                                    "rfwf19wo",
                                    "rfwf19rc",
                                    "rfwf19lc",
                                    "rfwf19tg",
                                    "rfwf21co",
                                    "rfwf21wo",
                                    "rfwf21rc",
                                    "rfwf21lc",
                                    "rfwf21tg",
                                    "rfwf25co",
                                    "rfwf25wo",
                                    "rfwf25rc",
                                    "rfwf25lc",
                                    "rfwf25tg",
                                    "rfwf27co",
                                    "rfwf27wo",
                                    "rfwf27rc",
                                    "rfwf27lc",
                                    "rfwf27tg",
                                    "rfwf30co",
                                    "rfwf30wo",
                                    "rfwf30rc",
                                    "rfwf30lc",
                                    "rfwf30tg",
                                    "rfrb00co",
                                    "rfrb00wo",
                                    "rfrb00rc",
                                    "rfrb00lc",
                                    "rfrb00tg",
                                    "rfps00co",
                                    "rfps00wo",
                                    "rfps00rc",
                                    "rfps00lc",
                                    "rfps00tg",
                                    "rfps03co",
                                    "rfps03wo",
                                    "rfps03rc",
                                    "rfps03lc",
                                    "rfps03tg",
                                    "rfps07co",
                                    "rfps07wo",
                                    "rfps07rc",
                                    "rfps07lc",
                                    "rfps07tg",
                                    "rfps11co",
                                    "rfps11wo",
                                    "rfps11rc",
                                    "rfps11lc",
                                    "rfps11tg",
                                    "rfps13co",
                                    "rfps13wo",
                                    "rfps13rc",
                                    "rfps13lc",
                                    "rfps13tg",
                                    "rfps15co",
                                    "rfps15wo",
                                    "rfps15rc",
                                    "rfps15lc",
                                    "rfps15tg",
                                    "rfps19co",
                                    "rfps19wo",
                                    "rfps19rc",
                                    "rfps19lc",
                                    "rfps19tg",
                                    "rfps21co",
                                    "rfps21wo",
                                    "rfps21rc",
                                    "rfps21lc",
                                    "rfps21tg"
                                ],
                                "description": "Roof construction assembly code"
                            },
                            "roof_color": {
                                "type": "string",
                                "enum": [
                                    "white",
                                    "light",
                                    "medium",
                                    "medium_dark",
                                    "dark",
                                    "cool_color"
                                ],
                                "description": "Color of roof exterior surface"
                            },
                            "roof_absorptance": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 1,
                                "description": "Absorptance of exterior surface (only used if roof_color is cool_color)"
                            },
                            "roof_type": {
                                "type": "string",
                                "oneOf": [
                                    {
                                        "const": "vented_attic",
                                        "title": "Unconditioned Attic"
                                    },
                                    {
                                        "const": "cath_ceiling",
                                        "title": "Cathedral Ceiling"
                                    },
                                    {
                                        "const": "below_other_unit",
                                        "title": "Below Other Unit"
                                    },
                                    {
                                        "const": "flat_roof",
                                        "title": "Flat Roof"
                                    },
                                    {
                                        "const": "bowstring_roof",
                                        "title": "Manufactured Home Bowstring Roof"
                                    }
                                ],
                                "description": "Type of roof"
                            },
                            "ceiling_assembly_code": {
                                "type": "string",
                                "enum": [
                                    "ecwf00",
                                    "ecwf03",
                                    "ecwf06",
                                    "ecwf09",
                                    "ecwf11",
                                    "ecwf13",
                                    "ecwf15",
                                    "ecwf19",
                                    "ecwf21",
                                    "ecwf25",
                                    "ecwf30",
                                    "ecwf35",
                                    "ecwf38",
                                    "ecwf44",
                                    "ecwf49",
                                    "ecwf55",
                                    "ecwf60"
                                ],
                                "description": "Ceiling construction assembly code (required unless roof_type is cath_ceiling)"
                            },
                            "knee_wall": {
                                "type": "object",
                                "description": "Knee wall inputs",
                                "additionalProperties": false,
                                "required": [
                                    "area",
                                    "assembly_code"
                                ],
                                "properties": {
                                    "area": {
                                        "type": "number",
                                        "minimum": 1,
                                        "maximum": 5000,
                                        "description": "Knee wall area"
                                    },
                                    "assembly_code": {
                                        "type": "string",
                                        "enum": [
                                            "kwwf00",
                                            "kwwf03",
                                            "kwwf07",
                                            "kwwf11",
                                            "kwwf13",
                                            "kwwf15",
                                            "kwwf19",
                                            "kwwf21"
                                        ],
                                        "description": "Knee wall assembly code"
                                    }
                                }
                            },
                            "zone_skylight": {
                                "type": "object",
                                "description": "Inputs about the skylights on this roof",
                                "additionalProperties": false,
                                "properties": {
                                    "skylight_area": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 300,
                                        "description": "Area of skylights (square feet)"
                                    },
                                    "skylight_method": {
                                        "type": "string",
                                        "enum": [
                                            "code",
                                            "custom"
                                        ],
                                        "description": "Construction method to use for skylights"
                                    },
                                    "skylight_code": {
                                        "type": "string",
                                        "enum": [
                                            "scna",
                                            "scnw",
                                            "stna",
                                            "stnw",
                                            "dcaa",
                                            "dcab",
                                            "dcaw",
                                            "dtaa",
                                            "dtab",
                                            "dtaw",
                                            "dpeaw",
                                            "dpeaab",
                                            "dpeaaw",
                                            "dseaa",
                                            "dseab",
                                            "dseaw",
                                            "dseaaw",
                                            "thmabw"
                                        ],
                                        "description": "Assembly code for skylights (only used if skylight_method is code)"
                                    },
                                    "skylight_u_value": {
                                        "type": "number",
                                        "minimum": 0.01,
                                        "maximum": 5,
                                        "description": "U-value of skylights (Btu/sf-hr-F) (only used if skylight_method is custom)"
                                    },
                                    "skylight_shgc": {
                                        "type": "number",
                                        "exclusiveMinimum": 0,
                                        "exclusiveMaximum": 1,
                                        "description": "Solar heat gain coefficient of skylights (only used if skylight_method is custom)"
                                    },
                                    "solar_screen": {
                                        "type": "boolean",
                                        "description": "Does this skylight have a solar screen?"
                                    }
                                },
                                "allOf": [
                                    {
                                        "if": {
                                            "properties": {
                                                "skylight_area": {
                                                    "exclusiveMinimum": 0
                                                }
                                            },
                                            "required": [
                                                "skylight_area"
                                            ]
                                        },
                                        "then": {
                                            "required": [
                                                "skylight_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "skylight_area": {
                                                    "exclusiveMinimum": 0
                                                },
                                                "skylight_method": {
                                                    "const": "code"
                                                }
                                            },
                                            "required": [
                                                "skylight_area",
                                                "skylight_method"
                                            ]
                                        },
                                        "then": {
                                            "allOf": [
                                                {
                                                    "required": [
                                                        "skylight_code"
                                                    ]
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "skylight_u_value"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "skylight_shgc"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "skylight_area": {
                                                    "exclusiveMinimum": 0
                                                },
                                                "skylight_method": {
                                                    "const": "custom"
                                                }
                                            },
                                            "required": [
                                                "skylight_area",
                                                "skylight_method"
                                            ]
                                        },
                                        "then": {
                                            "allOf": [
                                                {
                                                    "required": [
                                                        "skylight_u_value",
                                                        "skylight_shgc"
                                                    ]
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "skylight_code"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        },
                        "required": [
                            "roof_name",
                            "roof_type"
                        ],
                        "allOf": [
                            {
                                "if": {
                                    "properties": {
                                        "roof_type": {
                                            "enum": [
                                                "vented_attic",
                                                "cath_ceiling",
                                                "flat_roof",
                                                "bowstring_roof"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "roof_assembly_code",
                                        "roof_color"
                                    ]
                                },
                                "else": {
                                    "not": {
                                        "required": [
                                            "roof_color"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_type": {
                                            "const": "bowstring_roof"
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "roof_assembly_code": {
                                            "enum": [
                                                "rfwf00co",
                                                "rfwf00wo",
                                                "rfwf00rc",
                                                "rfwf00lc",
                                                "rfwf00tg",
                                                "rfwf03co",
                                                "rfwf03wo",
                                                "rfwf03rc",
                                                "rfwf03lc",
                                                "rfwf03tg",
                                                "rfwf07co",
                                                "rfwf07wo",
                                                "rfwf07rc",
                                                "rfwf07lc",
                                                "rfwf07tg",
                                                "rfwf11co",
                                                "rfwf11wo",
                                                "rfwf11rc",
                                                "rfwf11lc",
                                                "rfwf11tg",
                                                "rfwf13co",
                                                "rfwf13wo",
                                                "rfwf13rc",
                                                "rfwf13lc",
                                                "rfwf13tg",
                                                "rfwf15co",
                                                "rfwf15wo",
                                                "rfwf15rc",
                                                "rfwf15lc",
                                                "rfwf15tg",
                                                "rfwf19co",
                                                "rfwf19wo",
                                                "rfwf19rc",
                                                "rfwf19lc",
                                                "rfwf19tg",
                                                "rfwf21co",
                                                "rfwf21wo",
                                                "rfwf21rc",
                                                "rfwf21lc",
                                                "rfwf21tg",
                                                "rfwf25co",
                                                "rfwf25wo",
                                                "rfwf25rc",
                                                "rfwf25lc",
                                                "rfwf25tg",
                                                "rfwf27co",
                                                "rfwf27wo",
                                                "rfwf27rc",
                                                "rfwf27lc",
                                                "rfwf27tg",
                                                "rfwf30co",
                                                "rfwf30wo",
                                                "rfwf30rc",
                                                "rfwf30lc",
                                                "rfwf30tg",
                                                "rfrb00co",
                                                "rfrb00wo",
                                                "rfrb00rc",
                                                "rfrb00lc",
                                                "rfrb00tg"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "roof_assembly_code"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_type": {
                                            "enum": [
                                                "cath_ceiling",
                                                "flat_roof",
                                                "bowstring_roof"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                },
                                "then": {
                                    "allOf": [
                                        {
                                            "not": {
                                                "required": [
                                                    "ceiling_area"
                                                ]
                                            }
                                        },
                                        {
                                            "not": {
                                                "required": [
                                                    "ceiling_assembly_code"
                                                ]
                                            }
                                        },
                                        {
                                            "required": [
                                                "roof_area"
                                            ]
                                        }
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_type": {
                                            "const": "below_other_unit"
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                },
                                "then": {
                                    "allOf": [
                                        {
                                            "not": {
                                                "required": [
                                                    "ceiling_assembly_code"
                                                ]
                                            }
                                        },
                                        {
                                            "not": {
                                                "required": [
                                                    "roof_assembly_code"
                                                ]
                                            }
                                        },
                                        {
                                            "not": {
                                                "required": [
                                                    "roof_area"
                                                ]
                                            }
                                        },
                                        {
                                            "not": {
                                                "required": [
                                                    "zone_skylight"
                                                ]
                                            }
                                        },
                                        {
                                            "required": [
                                                "ceiling_area"
                                            ]
                                        }
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_type": {
                                            "const": "vented_attic"
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "ceiling_area",
                                        "ceiling_assembly_code"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_color": {
                                            "const": "cool_color"
                                        }
                                    },
                                    "required": [
                                        "roof_color"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "roof_absorptance"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "roof_color": {
                                            "not": {
                                                "const": "cool_color"
                                            }
                                        }
                                    },
                                    "required": [
                                        "roof_color"
                                    ]
                                },
                                "then": {
                                    "not": {
                                        "required": [
                                            "roof_absorptance"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "required": [
                                        "knee_wall"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "roof_type": {
                                            "const": "vented_attic"
                                        }
                                    }
                                }
                            }
                        ]
                    }
                },
                "zone_floor": {
                    "type": "array",
                    "description": "Inputs about the construction of the floor(s)",
                    "additionalItems": false,
                    "minItems": 0,
                    "maxItems": 2,
                    "items": {
                        "type": "object",
                        "required": [
                            "floor_name",
                            "floor_area",
                            "foundation_type"
                        ],
                        "additionalProperties": false,
                        "properties": {
                            "floor_name": {
                                "type": "string",
                                "enum": [
                                    "floor1",
                                    "floor2"
                                ],
                                "description": "Name of this floor instance"
                            },
                            "floor_area": {
                                "type": "number",
                                "minimum": 1,
                                "maximum": 25000,
                                "description": "Area of this foundation type"
                            },
                            "foundation_type": {
                                "type": "string",
                                "oneOf": [
                                    {
                                        "const": "slab_on_grade",
                                        "title": "Slab-on-grade foundation"
                                    },
                                    {
                                        "const": "uncond_basement",
                                        "title": "Unconditioned Basement"
                                    },
                                    {
                                        "const": "cond_basement",
                                        "title": "Conditioned Basement"
                                    },
                                    {
                                        "const": "unvented_crawl",
                                        "title": "Unvented Crawlspace"
                                    },
                                    {
                                        "const": "vented_crawl",
                                        "title": "Vented Crawlspace"
                                    },
                                    {
                                        "const": "above_other_unit",
                                        "title": "Above Other Unit"
                                    },
                                    {
                                        "const": "belly_and_wing",
                                        "title": "Manufactured Home Belly And Wing"
                                    }
                                ],
                                "description": "Type of foundation"
                            },
                            "foundation_insulation_level": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 19,
                                "description": "Foundation wall / slab edge insulation R-value (sf-hr-F/Btu)"
                            },
                            "floor_assembly_code": {
                                "type": "string",
                                "enum": [
                                    "efwf00ca",
                                    "efwf03ca",
                                    "efwf07ca",
                                    "efwf11ca",
                                    "efwf13ca",
                                    "efwf15ca",
                                    "efwf19ca",
                                    "efwf21ca",
                                    "efwf25ca",
                                    "efwf30ca",
                                    "efwf35ca",
                                    "efwf38ca",
                                    "efbw00",
                                    "efbw11",
                                    "efbw13",
                                    "efbw19",
                                    "efbw22",
                                    "efbw30"
                                ],
                                "description": "Floor construction assembly code (only used if foundation_type is not slab_on_grade, above_other_unit, or cond_basement)"
                            }
                        },
                        "allOf": [
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "enum": [
                                                "slab_on_grade",
                                                "above_other_unit",
                                                "cond_basement"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "not": {
                                        "required": [
                                            "floor_assembly_code"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "const": "slab_on_grade"
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "foundation_insulation_level": {
                                            "enum": [
                                                0,
                                                5
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_insulation_level"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "enum": [
                                                "uncond_basement",
                                                "cond_basement",
                                                "unvented_crawl",
                                                "vented_crawl"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "foundation_insulation_level": {
                                            "enum": [
                                                0,
                                                11,
                                                19
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_insulation_level"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "enum": [
                                                "above_other_unit",
                                                "belly_and_wing"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "not": {
                                        "required": [
                                            "foundation_insulation_level"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "const": "belly_and_wing"
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "floor_assembly_code": {
                                            "pattern": "^efbw[0-9]{2}$"
                                        }
                                    },
                                    "required": [
                                        "floor_assembly_code"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "foundation_type": {
                                            "enum": [
                                                "uncond_basement",
                                                "unvented_crawl",
                                                "vented_crawl"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "floor_assembly_code": {
                                            "pattern": "^efwf[0-9]{2}ca$"
                                        }
                                    },
                                    "required": [
                                        "floor_assembly_code"
                                    ]
                                }
                            }
                        ]
                    }
                },
                "zone_wall": {
                    "type": "array",
                    "description": "Inputs about the construction of the walls",
                    "additionalItems": false,
                    "minItems": 4,
                    "maxItems": 4,
                    "uniqueItems": true,
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                            "side",
                            "adjacent_to"
                        ],
                        "properties": {
                            "side": {
                                "type": "string",
                                "enum": [
                                    "front",
                                    "back",
                                    "right",
                                    "left"
                                ],
                                "description": "Side this wall faces"
                            },
                            "wall_assembly_code": {
                                "type": "string",
                                "enum": [
                                    "ewwf00wo",
                                    "ewwf00st",
                                    "ewwf00vi",
                                    "ewwf00al",
                                    "ewwf00br",
                                    "ewwf03wo",
                                    "ewwf03st",
                                    "ewwf03vi",
                                    "ewwf03al",
                                    "ewwf03br",
                                    "ewwf07wo",
                                    "ewwf07st",
                                    "ewwf07vi",
                                    "ewwf07al",
                                    "ewwf07br",
                                    "ewwf11wo",
                                    "ewwf11st",
                                    "ewwf11vi",
                                    "ewwf11al",
                                    "ewwf11br",
                                    "ewwf13wo",
                                    "ewwf13st",
                                    "ewwf13vi",
                                    "ewwf13al",
                                    "ewwf13br",
                                    "ewwf15wo",
                                    "ewwf15st",
                                    "ewwf15vi",
                                    "ewwf15al",
                                    "ewwf15br",
                                    "ewwf19wo",
                                    "ewwf19st",
                                    "ewwf19vi",
                                    "ewwf19al",
                                    "ewwf19br",
                                    "ewwf21wo",
                                    "ewwf21st",
                                    "ewwf21vi",
                                    "ewwf21al",
                                    "ewwf21br",
                                    "ewsf00wo",
                                    "ewsf00st",
                                    "ewsf00vi",
                                    "ewsf00al",
                                    "ewsf00br",
                                    "ewsf03wo",
                                    "ewsf03st",
                                    "ewsf03vi",
                                    "ewsf03al",
                                    "ewsf03br",
                                    "ewsf07wo",
                                    "ewsf07st",
                                    "ewsf07vi",
                                    "ewsf07al",
                                    "ewsf07br",
                                    "ewsf11wo",
                                    "ewsf11st",
                                    "ewsf11vi",
                                    "ewsf11al",
                                    "ewsf11br",
                                    "ewsf13wo",
                                    "ewsf13st",
                                    "ewsf13vi",
                                    "ewsf13al",
                                    "ewsf13br",
                                    "ewsf15wo",
                                    "ewsf15st",
                                    "ewsf15vi",
                                    "ewsf15al",
                                    "ewsf15br",
                                    "ewsf19wo",
                                    "ewsf19st",
                                    "ewsf19vi",
                                    "ewsf19al",
                                    "ewsf19br",
                                    "ewsf21wo",
                                    "ewsf21st",
                                    "ewsf21vi",
                                    "ewsf21al",
                                    "ewsf21br",
                                    "ewps00wo",
                                    "ewps00st",
                                    "ewps00vi",
                                    "ewps00al",
                                    "ewps00br",
                                    "ewps03wo",
                                    "ewps03st",
                                    "ewps03vi",
                                    "ewps03al",
                                    "ewps03br",
                                    "ewps07wo",
                                    "ewps07st",
                                    "ewps07vi",
                                    "ewps07al",
                                    "ewps07br",
                                    "ewps11wo",
                                    "ewps11st",
                                    "ewps11vi",
                                    "ewps11al",
                                    "ewps11br",
                                    "ewps13wo",
                                    "ewps13st",
                                    "ewps13vi",
                                    "ewps13al",
                                    "ewps13br",
                                    "ewps15wo",
                                    "ewps15st",
                                    "ewps15vi",
                                    "ewps15al",
                                    "ewps15br",
                                    "ewps19wo",
                                    "ewps19st",
                                    "ewps19vi",
                                    "ewps19al",
                                    "ewps19br",
                                    "ewps21wo",
                                    "ewps21st",
                                    "ewps21vi",
                                    "ewps21al",
                                    "ewps21br",
                                    "ewov19wo",
                                    "ewov19st",
                                    "ewov19vi",
                                    "ewov19al",
                                    "ewov19br",
                                    "ewov21wo",
                                    "ewov21st",
                                    "ewov21vi",
                                    "ewov21al",
                                    "ewov21br",
                                    "ewov25wo",
                                    "ewov25st",
                                    "ewov25vi",
                                    "ewov25al",
                                    "ewov25br",
                                    "ewov27wo",
                                    "ewov27st",
                                    "ewov27vi",
                                    "ewov27al",
                                    "ewov27br",
                                    "ewov33wo",
                                    "ewov33st",
                                    "ewov33vi",
                                    "ewov33al",
                                    "ewov33br",
                                    "ewov35wo",
                                    "ewov35st",
                                    "ewov35vi",
                                    "ewov35al",
                                    "ewov35br",
                                    "ewov38wo",
                                    "ewov38st",
                                    "ewov38vi",
                                    "ewov38al",
                                    "ewov38br",
                                    "ewbr00nn",
                                    "ewbr05nn",
                                    "ewbr10nn",
                                    "ewcb00st",
                                    "ewcb00br",
                                    "ewcb00nn",
                                    "ewcb03st",
                                    "ewcb03br",
                                    "ewcb03nn",
                                    "ewcb06st",
                                    "ewcb06br",
                                    "ewcb06nn",
                                    "ewsb00st",
                                    "iwwf00",
                                    "iwwf03",
                                    "iwwf07",
                                    "iwwf11",
                                    "iwwf13",
                                    "iwwf15",
                                    "iwwf19",
                                    "iwwf21"
                                ],
                                "description": "Wall construction assembly code"
                            },
                            "adjacent_to": {
                                "type": "string",
                                "enum": [
                                    "outside",
                                    "other_unit",
                                    "other_heated_space",
                                    "other_multifamily_buffer_space",
                                    "other_non_freezing_space"
                                ],
                                "description": "What is on the other side of the wall"
                            },
                            "zone_window": {
                                "type": "object",
                                "description": "Inputs about the windows on this wall",
                                "additionalProperties": false,
                                "required": [
                                    "window_area"
                                ],
                                "properties": {
                                    "window_area": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 999,
                                        "description": "Area of windows on this wall (square feet)"
                                    },
                                    "window_method": {
                                        "type": "string",
                                        "enum": [
                                            "code",
                                            "custom"
                                        ],
                                        "description": "Construction method to use for this window"
                                    },
                                    "window_code": {
                                        "type": "string",
                                        "enum": [
                                            "scna",
                                            "scnw",
                                            "stna",
                                            "stnw",
                                            "dcaa",
                                            "dcab",
                                            "dcaw",
                                            "dtaa",
                                            "dtab",
                                            "dtaw",
                                            "dpeaw",
                                            "dpeaab",
                                            "dpeaaw",
                                            "dseaa",
                                            "dseab",
                                            "dseaw",
                                            "dseaaw",
                                            "thmabw"
                                        ],
                                        "description": "assembly code for this window (only used if window_method is code)"
                                    },
                                    "window_u_value": {
                                        "type": "number",
                                        "minimum": 0.01,
                                        "maximum": 5,
                                        "description": "U-value of this window (Btu/sf-hr-F) (only used if window_method is custom)"
                                    },
                                    "window_shgc": {
                                        "type": "number",
                                        "exclusiveMinimum": 0,
                                        "exclusiveMaximum": 1,
                                        "description": "Solar heat gain coefficient of this window (only used if window_method is custom)"
                                    },
                                    "solar_screen": {
                                        "type": "boolean",
                                        "description": "Does this window have a solar screen?"
                                    }
                                },
                                "if": {
                                    "properties": {
                                        "window_area": {
                                            "type": "number",
                                            "exclusiveMinimum": 0
                                        }
                                    }
                                },
                                "then": {
                                    "required": [
                                        "window_area"
                                    ],
                                    "if": {
                                        "properties": {
                                            "window_method": {
                                                "const": "code"
                                            }
                                        }
                                    },
                                    "then": {
                                        "required": [
                                            "window_code"
                                        ],
                                        "not": {
                                            "anyOf": [
                                                {
                                                    "required": [
                                                        "window_u_value"
                                                    ]
                                                },
                                                {
                                                    "required": [
                                                        "window_shgc"
                                                    ]
                                                }
                                            ]
                                        }
                                    },
                                    "else": {
                                        "if": {
                                            "properties": {
                                                "window_method": {
                                                    "const": "custom"
                                                }
                                            }
                                        },
                                        "then": {
                                            "required": [
                                                "window_u_value",
                                                "window_shgc"
                                            ],
                                            "not": {
                                                "required": [
                                                    "window_code"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "allOf": [
                            {
                                "if": {
                                    "properties": {
                                        "adjacent_to": {
                                            "enum": [
                                                "outside",
                                                "other_heated_space",
                                                "other_multifamily_buffer_space",
                                                "other_non_freezing_space"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "adjacent_to"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "wall_assembly_code"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "adjacent_to": {
                                            "const": "other_unit"
                                        }
                                    },
                                    "required": [
                                        "adjacent_to"
                                    ]
                                },
                                "then": {
                                    "not": {
                                        "required": [
                                            "wall_assembly_code"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "adjacent_to": {
                                            "const": "outside"
                                        }
                                    },
                                    "required": [
                                        "adjacent_to"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "zone_window"
                                    ]
                                },
                                "else": {
                                    "not": {
                                        "required": [
                                            "zone_window"
                                        ]
                                    }
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "adjacent_to": {
                                            "enum": [
                                                "other_heated_space",
                                                "other_multifamily_buffer_space",
                                                "other_non_freezing_space"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "adjacent_to"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "wall_assembly_code": {
                                            "enum": [
                                                "iwwf00",
                                                "iwwf03",
                                                "iwwf07",
                                                "iwwf11",
                                                "iwwf13",
                                                "iwwf15",
                                                "iwwf19",
                                                "iwwf21"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "wall_assembly_code"
                                    ]
                                }
                            }
                        ]
                    }
                }
            },
            "allOf": [
                {
                    "properties": {
                        "zone_wall": {
                            "contains": {
                                "properties": {
                                    "side": {
                                        "const": "front"
                                    }
                                },
                                "required": [
                                    "side"
                                ]
                            }
                        }
                    }
                },
                {
                    "properties": {
                        "zone_wall": {
                            "contains": {
                                "properties": {
                                    "side": {
                                        "const": "back"
                                    }
                                },
                                "required": [
                                    "side"
                                ]
                            }
                        }
                    }
                },
                {
                    "properties": {
                        "zone_wall": {
                            "contains": {
                                "properties": {
                                    "side": {
                                        "const": "left"
                                    }
                                },
                                "required": [
                                    "side"
                                ]
                            }
                        }
                    }
                },
                {
                    "properties": {
                        "zone_wall": {
                            "contains": {
                                "properties": {
                                    "side": {
                                        "const": "right"
                                    }
                                },
                                "required": [
                                    "side"
                                ]
                            }
                        }
                    }
                }
            ]
        },
        "systems": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "hvac": {
                    "type": "array",
                    "additionalItems": false,
                    "minItems": 1,
                    "maxItems": 2,
                    "items": {
                        "type": "object",
                        "required": [
                            "hvac_name",
                            "hvac_fraction"
                        ],
                        "additionalProperties": false,
                        "properties": {
                            "hvac_name": {
                                "type": "string",
                                "enum": [
                                    "hvac1",
                                    "hvac2"
                                ],
                                "description": "Name of this system instance"
                            },
                            "hvac_fraction": {
                                "type": "number",
                                "exclusiveMinimum": 0,
                                "maximum": 1,
                                "description": "Fraction of conditioned floor area served by this system"
                            },
                            "heating": {
                                "type": "object",
                                "description": "Inputs about the heating system",
                                "additionalProperties": false,
                                "required": [
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "oneOf": [
                                            {
                                                "const": "none",
                                                "title": "None"
                                            },
                                            {
                                                "const": "central_furnace",
                                                "title": "Central furnace"
                                            },
                                            {
                                                "const": "wall_furnace",
                                                "title": "Room (through-the-wall) furnace"
                                            },
                                            {
                                                "const": "boiler",
                                                "title": "Boiler"
                                            },
                                            {
                                                "const": "heat_pump",
                                                "title": "Heat Pump"
                                            },
                                            {
                                                "const": "baseboard",
                                                "title": "Baseboard Heater"
                                            },
                                            {
                                                "const": "gchp",
                                                "title": "Ground Coupled Heat Pump"
                                            },
                                            {
                                                "const": "mini_split",
                                                "title": "Minisplit (ductless) heat pump"
                                            },
                                            {
                                                "const": "wood_stove",
                                                "title": "Wood Stove"
                                            }
                                        ],
                                        "description": "Heating equipment type"
                                    },
                                    "fuel_primary": {
                                        "type": "string",
                                        "oneOf": [
                                            {
                                                "const": "natural_gas",
                                                "title": "Gas"
                                            },
                                            {
                                                "const": "lpg",
                                                "title": "Propane (LPG)"
                                            },
                                            {
                                                "const": "fuel_oil",
                                                "title": "Oil"
                                            },
                                            {
                                                "const": "electric",
                                                "title": "Electric"
                                            },
                                            {
                                                "const": "cord_wood",
                                                "title": "Wood"
                                            },
                                            {
                                                "const": "pellet_wood",
                                                "title": "Pellets"
                                            }
                                        ],
                                        "description": "Primary heating fuel"
                                    },
                                    "efficiency_method": {
                                        "type": "string",
                                        "enum": [
                                            "user",
                                            "shipment_weighted"
                                        ],
                                        "description": "Method to determine heating efficiency"
                                    },
                                    "year": {
                                        "type": "integer",
                                        "minimum": 1970,
                                        "description": "Year equipment was manufactured (only used if efficiency_method is shipment_weighted)"
                                    },
                                    "efficiency": {
                                        "type": "number",
                                        "$comment": "Additional requirements for this property apply based on the heating system type"
                                    },
                                    "efficiency_unit": {
                                        "type": "string",
                                        "enum": [
                                            "afue",
                                            "cop",
                                            "hspf",
                                            "hspf2"
                                        ],
                                        "$comment": "Additional requirements for this property apply based on the heating system type"
                                    }
                                },
                                "allOf": [
                                    {
                                        "if": {
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        },
                                        "then": {
                                            "if": {
                                                "properties": {
                                                    "efficiency_method": {
                                                        "const": "shipment_weighted"
                                                    }
                                                }
                                            },
                                            "then": {
                                                "allOf": [
                                                    {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency_unit"
                                                            ]
                                                        }
                                                    }
                                                ]
                                            },
                                            "else": {
                                                "properties": {
                                                    "efficiency_method": {
                                                        "const": "user"
                                                    }
                                                },
                                                "required": [
                                                    "efficiency",
                                                    "efficiency_unit"
                                                ],
                                                "not": {
                                                    "required": [
                                                        "year"
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "description": "fuel_primary is required when there is a heating system",
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "const": "none"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "allOf": [
                                                {
                                                    "not": {
                                                        "required": [
                                                            "fuel_primary"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_method"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_unit"
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        "else": {
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        }
                                    },
                                    {
                                        "description": "rules for central_furnace, wall_furnace, and boiler",
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "central_furnace",
                                                        "wall_furnace",
                                                        "boiler"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "if": {
                                                "properties": {
                                                    "fuel_primary": {
                                                        "const": "electric"
                                                    }
                                                },
                                                "required": [
                                                    "fuel_primary"
                                                ]
                                            },
                                            "then": {
                                                "allOf": [
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency_unit"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency_method"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "year"
                                                            ]
                                                        }
                                                    }
                                                ]
                                            },
                                            "else": {
                                                "description": "Fuel equipment rules",
                                                "properties": {
                                                    "efficiency_unit": {
                                                        "const": "afue",
                                                        "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                    },
                                                    "efficiency": {
                                                        "minimum": 0.6,
                                                        "maximum": 1,
                                                        "description": "AFUE of heating equipment (only used if efficiency_method is user)"
                                                    },
                                                    "fuel_primary": {
                                                        "enum": [
                                                            "natural_gas",
                                                            "lpg",
                                                            "fuel_oil"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "efficiency_method",
                                                    "fuel_primary"
                                                ]
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "heat_pump",
                                                        "mini_split"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_unit": {
                                                    "enum": [
                                                        "hspf",
                                                        "hspf2"
                                                    ],
                                                    "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                },
                                                "efficiency": {
                                                    "minimum": 6,
                                                    "maximum": 20,
                                                    "description": "HSPF or HSPF2 of heating equipment (only used if efficiency_method is user)"
                                                },
                                                "fuel_primary": {
                                                    "const": "electric"
                                                }
                                            },
                                            "required": [
                                                "fuel_primary",
                                                "efficiency_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "const": "gchp"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_unit": {
                                                    "const": "cop",
                                                    "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                },
                                                "efficiency": {
                                                    "minimum": 2,
                                                    "maximum": 5,
                                                    "description": "COP (ARI-330) of heating equipment (only used if efficiency_method is user)"
                                                },
                                                "fuel_primary": {
                                                    "const": "electric"
                                                },
                                                "efficiency_method": {
                                                    "const": "user"
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "const": "baseboard"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "const": "electric"
                                                }
                                            },
                                            "allOf": [
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_unit"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_method"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "wood_stove"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "enum": [
                                                        "cord_wood",
                                                        "pellet_wood"
                                                    ]
                                                }
                                            },
                                            "allOf": [
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_unit"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_method"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            "cooling": {
                                "type": "object",
                                "description": "Inputs about the cooling system",
                                "additionalProperties": false,
                                "required": [
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "oneOf": [
                                            {
                                                "const": "packaged_dx",
                                                "title": "Room air conditioner"
                                            },
                                            {
                                                "const": "split_dx",
                                                "title": "Central air conditioner"
                                            },
                                            {
                                                "const": "heat_pump",
                                                "title": "Electric heat pump"
                                            },
                                            {
                                                "const": "gchp",
                                                "title": "Ground coupled heat pump"
                                            },
                                            {
                                                "const": "dec",
                                                "title": "Direct evaporative cooling"
                                            },
                                            {
                                                "const": "mini_split",
                                                "title": "Minisplit (ductless) heat pump"
                                            },
                                            {
                                                "const": "none",
                                                "title": "None"
                                            }
                                        ],
                                        "description": "Cooling equipment type"
                                    },
                                    "efficiency_method": {
                                        "type": "string",
                                        "enum": [
                                            "user",
                                            "shipment_weighted"
                                        ],
                                        "description": "Method to determine cooling efficiency"
                                    },
                                    "year": {
                                        "type": "integer",
                                        "minimum": 1970,
                                        "description": "Year equipment was manufactured (only used if efficiency_method is shipment_weighted)"
                                    },
                                    "efficiency": {
                                        "type": "number",
                                        "$comment": "Additional requirements for this property apply based on the cooling system type"
                                    },
                                    "efficiency_unit": {
                                        "type": "string",
                                        "enum": [
                                            "eer",
                                            "ceer",
                                            "seer",
                                            "seer2"
                                        ],
                                        "$comment": "Additional requirements for this property apply based on the cooling system type"
                                    }
                                },
                                "allOf": [
                                    {
                                        "if": {
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        },
                                        "then": {
                                            "if": {
                                                "properties": {
                                                    "efficiency_method": {
                                                        "const": "shipment_weighted"
                                                    }
                                                }
                                            },
                                            "then": {
                                                "allOf": [
                                                    {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "not": {
                                                            "required": [
                                                                "efficiency_unit"
                                                            ]
                                                        }
                                                    }
                                                ]
                                            },
                                            "else": {
                                                "properties": {
                                                    "efficiency_method": {
                                                        "const": "user"
                                                    }
                                                },
                                                "required": [
                                                    "efficiency",
                                                    "efficiency_unit"
                                                ],
                                                "not": {
                                                    "required": [
                                                        "year"
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "split_dx",
                                                        "heat_pump",
                                                        "mini_split"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_unit": {
                                                    "enum": [
                                                        "seer",
                                                        "seer2"
                                                    ],
                                                    "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                },
                                                "efficiency": {
                                                    "minimum": 8,
                                                    "maximum": 40,
                                                    "description": "SEER or SEER2 of cooling equipment (only used if efficiency_method is user)"
                                                }
                                            },
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "const": "packaged_dx"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_unit": {
                                                    "enum": [
                                                        "eer",
                                                        "ceer"
                                                    ],
                                                    "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                },
                                                "efficiency": {
                                                    "minimum": 8,
                                                    "maximum": 40,
                                                    "description": "EER or CEER of cooling equipment (only used if efficiency_method is user)"
                                                }
                                            },
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "const": "gchp"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_unit": {
                                                    "const": "eer",
                                                    "description": "Unit of efficiency value (only used if efficiency_method is user)"
                                                },
                                                "efficiency": {
                                                    "minimum": 8,
                                                    "maximum": 40,
                                                    "description": "EER of cooling equipment (only used if efficiency_method is user)"
                                                }
                                            },
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "mini_split",
                                                        "gchp"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency_method": {
                                                    "const": "user"
                                                }
                                            },
                                            "required": [
                                                "efficiency_method"
                                            ]
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "dec",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        },
                                        "then": {
                                            "allOf": [
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_method"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency_unit"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "efficiency"
                                                        ]
                                                    }
                                                },
                                                {
                                                    "not": {
                                                        "required": [
                                                            "year"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            "hvac_distribution": {
                                "$comment": "Additional requirements for this property apply based on the heating and cooling system type",
                                "$ref": "#/$defs/hvac_distribution"
                            }
                        },
                        "allOf": [
                            {
                                "if": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "central_furnace",
                                                        "wall_furnace",
                                                        "baseboard",
                                                        "boiler"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "packaged_dx",
                                                        "split_dx",
                                                        "mini_split",
                                                        "dec",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "const": "heat_pump"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "packaged_dx",
                                                        "heat_pump",
                                                        "dec",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "const": "gchp"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "packaged_dx",
                                                        "gchp",
                                                        "dec",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "const": "mini_split"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "packaged_dx",
                                                        "mini_split",
                                                        "dec",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "const": "split_dx"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "central_furnace",
                                                        "wall_furnace",
                                                        "baseboard",
                                                        "boiler",
                                                        "wood_stove",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "const": "heat_pump"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "heat_pump",
                                                        "wood_stove",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "const": "gchp"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "gchp",
                                                        "wood_stove",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "const": "mini_split"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                },
                                "then": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "central_furnace",
                                                        "wall_furnace",
                                                        "baseboard",
                                                        "boiler",
                                                        "mini_split",
                                                        "wood_stove",
                                                        "none"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "heating"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "allOf": [
                                        {
                                            "properties": {
                                                "heating": {
                                                    "properties": {
                                                        "type": {
                                                            "enum": [
                                                                "central_furnace",
                                                                "heat_pump",
                                                                "gchp"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "type"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "heating"
                                            ]
                                        }
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "hvac_distribution"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "cooling": {
                                            "properties": {
                                                "type": {
                                                    "enum": [
                                                        "split_dx",
                                                        "heat_pump",
                                                        "gchp"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "cooling"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "hvac_distribution"
                                    ]
                                }
                            },
                            {
                                "if": {
                                    "allOf": [
                                        {
                                            "properties": {
                                                "heating": {
                                                    "properties": {
                                                        "type": {
                                                            "enum": [
                                                                "wall_furnace",
                                                                "baseboard",
                                                                "boiler",
                                                                "mini_split",
                                                                "wood_stove",
                                                                "none"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "type"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "heating"
                                            ]
                                        },
                                        {
                                            "properties": {
                                                "cooling": {
                                                    "properties": {
                                                        "type": {
                                                            "enum": [
                                                                "packaged_dx",
                                                                "mini_split",
                                                                "dec",
                                                                "none"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "type"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "cooling"
                                            ]
                                        }
                                    ]
                                },
                                "then": {
                                    "not": {
                                        "required": [
                                            "hvac_distribution"
                                        ]
                                    }
                                }
                            }
                        ]
                    }
                },
                "domestic_hot_water": {
                    "type": "object",
                    "required": [
                        "category",
                        "type"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "category": {
                            "type": "string",
                            "enum": [
                                "unit",
                                "combined"
                            ],
                            "description": "Water heater category"
                        },
                        "type": {
                            "type": "string",
                            "oneOf": [
                                {
                                    "const": "storage",
                                    "title": "Storage"
                                },
                                {
                                    "const": "heat_pump",
                                    "title": "Heat Pump"
                                },
                                {
                                    "const": "indirect",
                                    "title": "Indirect Tank"
                                },
                                {
                                    "const": "tankless_coil",
                                    "title": "Tankless Coil"
                                },
                                {
                                    "const": "tankless",
                                    "title": "Instantaneous"
                                }
                            ],
                            "description": "Water heater type"
                        },
                        "fuel_primary": {
                            "type": "string",
                            "oneOf": [
                                {
                                    "const": "electric",
                                    "title": "Electric"
                                },
                                {
                                    "const": "natural_gas",
                                    "title": "Natural Gas"
                                },
                                {
                                    "const": "lpg",
                                    "title": "LPG"
                                },
                                {
                                    "const": "fuel_oil",
                                    "title": "Oil"
                                }
                            ],
                            "description": "Primary water heater fuel"
                        },
                        "efficiency_method": {
                            "type": "string",
                            "enum": [
                                "user",
                                "shipment_weighted"
                            ],
                            "description": "Method to determine water heater efficiency"
                        },
                        "year": {
                            "type": "integer",
                            "minimum": 1972,
                            "description": "Year water heater was manufactured (only used if efficiency_method is shipment_weighted)"
                        },
                        "efficiency": {
                            "type": "number",
                            "description": "Efficiency of water heater (only used if efficiency_method is user)"
                        },
                        "efficiency_unit": {
                            "type": "string",
                            "enum": [
                                "ef",
                                "uef"
                            ],
                            "description": "Unit of water heater efficiency"
                        }
                    },
                    "allOf": [
                        {
                            "if": {
                                "properties": {
                                    "type": {
                                        "enum": [
                                            "indirect",
                                            "tankless_coil"
                                        ]
                                    }
                                },
                                "required": [
                                    "type"
                                ]
                            },
                            "then": {
                                "properties": {
                                    "category": {
                                        "const": "combined"
                                    }
                                },
                                "required": [
                                    "category"
                                ]
                            }
                        },
                        {
                            "if": {
                                "allOf": [
                                    {
                                        "properties": {
                                            "category": {
                                                "const": "unit"
                                            }
                                        },
                                        "required": [
                                            "category"
                                        ]
                                    }
                                ]
                            },
                            "then": {
                                "required": [
                                    "fuel_primary",
                                    "efficiency_method"
                                ]
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "category": {
                                        "const": "unit"
                                    }
                                },
                                "required": [
                                    "category"
                                ]
                            },
                            "then": {
                                "if": {
                                    "properties": {
                                        "efficiency_method": {
                                            "const": "shipment_weighted"
                                        }
                                    },
                                    "required": [
                                        "efficiency_method"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "year"
                                    ]
                                },
                                "else": {
                                    "not": {
                                        "required": [
                                            "year"
                                        ]
                                    }
                                }
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "category": {
                                        "const": "unit"
                                    }
                                },
                                "required": [
                                    "category"
                                ]
                            },
                            "then": {
                                "if": {
                                    "properties": {
                                        "efficiency_method": {
                                            "const": "user"
                                        }
                                    },
                                    "required": [
                                        "efficiency_method"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "efficiency",
                                        "efficiency_unit"
                                    ]
                                },
                                "else": {
                                    "not": {
                                        "required": [
                                            "efficiency",
                                            "efficiency_unit"
                                        ]
                                    }
                                }
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "type": {
                                        "const": "storage"
                                    },
                                    "efficiency_method": {
                                        "enum": [
                                            "user",
                                            "shipment_weighted"
                                        ]
                                    }
                                },
                                "required": [
                                    "type",
                                    "efficiency_method"
                                ]
                            },
                            "then": {
                                "allOf": [
                                    {
                                        "if": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "const": "fuel_oil"
                                                }
                                            },
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency": {
                                                    "type": "number",
                                                    "minimum": 0.45,
                                                    "maximum": 0.95
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "enum": [
                                                        "natural_gas",
                                                        "lpg"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency": {
                                                    "type": "number",
                                                    "minimum": 0.5,
                                                    "maximum": 0.95
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "const": "electric"
                                                }
                                            },
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency": {
                                                    "type": "number",
                                                    "minimum": 0.86,
                                                    "maximum": 0.95
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "type": {
                                        "const": "tankless"
                                    },
                                    "efficiency_method": {
                                        "const": "user"
                                    }
                                },
                                "required": [
                                    "type",
                                    "efficiency_method"
                                ]
                            },
                            "then": {
                                "allOf": [
                                    {
                                        "if": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "enum": [
                                                        "fuel_oil",
                                                        "natural_gas",
                                                        "lpg"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency": {
                                                    "type": "number",
                                                    "minimum": 0.7,
                                                    "maximum": 0.99
                                                }
                                            }
                                        }
                                    },
                                    {
                                        "if": {
                                            "properties": {
                                                "fuel_primary": {
                                                    "const": "electric"
                                                }
                                            },
                                            "required": [
                                                "fuel_primary"
                                            ]
                                        },
                                        "then": {
                                            "properties": {
                                                "efficiency": {
                                                    "type": "number",
                                                    "minimum": 0.86,
                                                    "maximum": 0.99
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "type": {
                                        "const": "heat_pump"
                                    }
                                },
                                "required": [
                                    "type",
                                    "efficiency_method"
                                ]
                            },
                            "then": {
                                "properties": {
                                    "efficiency_method": {
                                        "const": "user"
                                    },
                                    "efficiency": {
                                        "type": "number",
                                        "minimum": 1,
                                        "maximum": 5
                                    },
                                    "fuel_primary": {
                                        "const": "electric"
                                    }
                                }
                            }
                        }
                    ]
                },
                "generation": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "solar_electric": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "capacity_known": {
                                    "type": "boolean",
                                    "description": "Is the capacity known?"
                                },
                                "system_capacity": {
                                    "type": "number",
                                    "description": "DC capacity of system (kW) (only used if capacity_known is true)"
                                },
                                "num_panels": {
                                    "type": "integer",
                                    "description": "Number of panels in the system (only used if capacity_known is false)"
                                },
                                "number_units_sharing_system": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "description": "Total number of units sharing the PV system"
                                },
                                "year": {
                                    "type": "integer",
                                    "minimum": 2000,
                                    "description": "Year system was installed"
                                },
                                "array_azimuth": {
                                    "type": "string",
                                    "enum": [
                                        "north",
                                        "north_east",
                                        "east",
                                        "south_east",
                                        "south",
                                        "south_west",
                                        "west",
                                        "north_west"
                                    ],
                                    "description": "Direction panels face"
                                },
                                "array_tilt": {
                                    "type": "string",
                                    "enum": [
                                        "flat",
                                        "low_slope",
                                        "medium_slope",
                                        "steep_slope"
                                    ],
                                    "description": "Tilt of panels"
                                }
                            },
                            "required": [
                                "capacity_known",
                                "year",
                                "array_azimuth",
                                "array_tilt"
                            ],
                            "if": {
                                "properties": {
                                    "capacity_known": {
                                        "const": true
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "capacity_known",
                                    "system_capacity"
                                ],
                                "not": {
                                    "required": [
                                        "num_panels"
                                    ]
                                }
                            },
                            "else": {
                                "if": {
                                    "properties": {
                                        "capacity_known": {
                                            "const": false
                                        }
                                    }
                                },
                                "then": {
                                    "required": [
                                        "capacity_known",
                                        "num_panels"
                                    ],
                                    "not": {
                                        "required": [
                                            "system_capacity"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "domestic_hot_water": {
                                "properties": {
                                    "category": {
                                        "const": "combined"
                                    }
                                }
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "heating": {
                                            "properties": {
                                                "type": {
                                                    "const": "boiler"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ]
                                        }
                                    }
                                },
                                "error_msg": "The category element can only be set to \"combined\" if the heating/type is \"boiler\" and the boiler provides the domestic hot water"
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "allOf": [
                                        {
                                            "properties": {
                                                "heating": {
                                                    "properties": {
                                                        "type": {
                                                            "const": "none"
                                                        }
                                                    },
                                                    "required": [
                                                        "type"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "heating"
                                            ]
                                        },
                                        {
                                            "properties": {
                                                "cooling": {
                                                    "properties": {
                                                        "type": {
                                                            "const": "none"
                                                        }
                                                    },
                                                    "required": [
                                                        "type"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "cooling"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }

                    },
                    "then": {
                        "properties": {
                            "hvac": {
                                "maxItems": 1
                            }
                        },
                        "required": [
                            "hvac"
                        ]
                    }
                }
            ],
            "required": [
                "hvac",
                "domestic_hot_water"
            ]
        }
    },
    "allOf": [
        {
            "if": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "apartment_unit"
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            },
            "then": {
                "properties": {
                    "address": {
                        "required": [
                            "address2"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "about": {
                        "properties": {
                            "manufactured_home_sections": {
                                "enum": [
                                    "double-wide",
                                    "triple-wide"
                                ]
                            }
                        },
                        "required": [
                            "manufactured_home_sections"
                        ]
                    }
                }
            },
            "then": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_roof": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "roof_type": {
                                                "const": "bowstring_roof"
                                            }
                                        },
                                        "required": [
                                            "roof_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "manufactured_home"
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            },
            "then": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_wall": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "wall_assembly_code": {
                                                "enum": [
                                                    "ewov19wo",
                                                    "ewov19st",
                                                    "ewov19vi",
                                                    "ewov19al",
                                                    "ewov19br",
                                                    "ewov21wo",
                                                    "ewov21st",
                                                    "ewov21vi",
                                                    "ewov21al",
                                                    "ewov21br",
                                                    "ewov25wo",
                                                    "ewov25st",
                                                    "ewov25vi",
                                                    "ewov25al",
                                                    "ewov25br",
                                                    "ewov27wo",
                                                    "ewov27st",
                                                    "ewov27vi",
                                                    "ewov27al",
                                                    "ewov27br",
                                                    "ewov33wo",
                                                    "ewov33st",
                                                    "ewov33vi",
                                                    "ewov33al",
                                                    "ewov33br",
                                                    "ewov35wo",
                                                    "ewov35st",
                                                    "ewov35vi",
                                                    "ewov35al",
                                                    "ewov35br",
                                                    "ewov38wo",
                                                    "ewov38st",
                                                    "ewov38vi",
                                                    "ewov38al",
                                                    "ewov38br",
                                                    "ewbr00nn",
                                                    "ewbr05nn",
                                                    "ewbr10nn",
                                                    "ewcb00st",
                                                    "ewcb00br",
                                                    "ewcb00nn",
                                                    "ewcb03st",
                                                    "ewcb03br",
                                                    "ewcb03nn",
                                                    "ewcb06st",
                                                    "ewcb06br",
                                                    "ewcb06nn",
                                                    "ewsb00st"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "wall_assembly_code"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_roof": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "roof_type": {
                                                "enum": [
                                                    "vented_attic",
                                                    "cond_attic"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "roof_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "not": {
                                                        "contains": {
                                                            "properties": {
                                                                "location": {
                                                                    "const": "uncond_attic"
                                                                }
                                                            },
                                                            "required": [
                                                                "location"
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "error_msg": "duct/location[\"uncond_attic\"] is not allowed as there is no attic."
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "enum": [
                                    "single_family_detached",
                                    "manufactured_home"
                                ]
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            },
            "then": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_wall": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "adjacent_to": {
                                                "enum": [
                                                    "other_unit",
                                                    "other_heated_space",
                                                    "other_multifamily_buffer_space",
                                                    "other_non_freezing_space"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "adjacent_to"
                                        ]
                                    }
                                },
                                "error_msg": "single family detached and manufactured homes only allow adjacent_to \"outside\""
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "enum": [
                                    "apartment_unit",
                                    "single_family_attached"
                                ]
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "generation": {
                                "properties": {
                                    "solar_electric": {
                                        "properties": {
                                            "system_capacity": {
                                                "type": "number",
                                                "minimum": 0.05,
                                                "maximum": 200
                                            },
                                            "num_panels": {
                                                "type": "number",
                                                "minimum": 1,
                                                "maximum": 1000
                                            }
                                        },
                                        "required": [
                                            "number_units_sharing_system"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "else": {
                "properties": {
                    "systems": {
                        "properties": {
                            "generation": {
                                "properties": {
                                    "solar_electric": {
                                        "properties": {
                                            "system_capacity": {
                                                "type": "number",
                                                "minimum": 0.05,
                                                "maximum": 20
                                            },
                                            "num_panels": {
                                                "type": "number",
                                                "minimum": 1,
                                                "maximum": 100
                                            }
                                        },
                                        "not": {
                                            "required": [
                                                "number_units_sharing_system"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_roof": {
                                "contains": {
                                    "properties": {
                                        "roof_type": {
                                            "const": "bowstring_roof"
                                        }
                                    },
                                    "required": [
                                        "roof_type"
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "manufactured_home"
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "anyOf": [
                    {
                        "properties": {
                            "zone": {
                                "properties": {
                                    "zone_roof": {
                                        "contains": {
                                            "properties": {
                                                "roof_type": {
                                                    "const": "below_other_unit"
                                                }
                                            },
                                            "required": [
                                                "roof_type"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    {
                        "properties": {
                            "zone": {
                                "properties": {
                                    "zone_floor": {
                                        "contains": {
                                            "properties": {
                                                "foundation_type": {
                                                    "const": "above_other_unit"
                                                }
                                            },
                                            "required": [
                                                "foundation_type"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                ]
            },
            "then": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "enum": [
                                    "single_family_attached",
                                    "apartment_unit"
                                ]
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "contains": {
                                    "properties": {
                                        "foundation_type": {
                                            "const": "slab_on_grade"
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "about": {
                        "not": {
                            "properties": {
                                "dwelling_unit_type": {
                                    "const": "manufactured_home"
                                }
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ],
                        "error_msg": "foundation_type[\"slab_on_grade\"] is not allowed for manufactured homes."
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "foundation_type": {
                                                "const": "vented_crawl"
                                            }
                                        },
                                        "required": [
                                            "foundation_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "not": {
                                                        "contains": {
                                                            "properties": {
                                                                "location": {
                                                                    "const": "vented_crawl"
                                                                }
                                                            },
                                                            "required": [
                                                                "location"
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "error_msg": "duct/location[\"vented_crawl\"] is not allowed as there is no vented crawlspace."
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "foundation_type": {
                                                "const": "unvented_crawl"
                                            }
                                        },
                                        "required": [
                                            "foundation_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "not": {
                                                        "contains": {
                                                            "properties": {
                                                                "location": {
                                                                    "const": "unvented_crawl"
                                                                }
                                                            },
                                                            "required": [
                                                                "location"
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "error_msg": "duct/location[\"unvented_crawl\"] is not allowed as there is no unvented crawlspace."
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "foundation_type": {
                                                "const": "uncond_basement"
                                            }
                                        },
                                        "required": [
                                            "foundation_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "not": {
                                                        "contains": {
                                                            "properties": {
                                                                "location": {
                                                                    "const": "uncond_basement"
                                                                }
                                                            },
                                                            "required": [
                                                                "location"
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "error_msg": "duct/location[\"uncond_basement\"] is not allowed as there is no unconditioned basement."
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "not": {
                                    "contains": {
                                        "properties": {
                                            "foundation_type": {
                                                "const": "belly_and_wing"
                                            }
                                        },
                                        "required": [
                                            "foundation_type"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "not": {
                                                        "contains": {
                                                            "properties": {
                                                                "location": {
                                                                    "const": "manufactured_home_belly"
                                                                }
                                                            },
                                                            "required": [
                                                                "location"
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "error_msg": "duct/location[\"manufactured_home_belly\"] is not allowed as there is no belly_and_wing foundation type."
                            }
                        }
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "zone": {
                        "properties": {
                            "zone_floor": {
                                "contains": {
                                    "properties": {
                                        "foundation_type": {
                                            "const": "belly_and_wing"
                                        }
                                    },
                                    "required": [
                                        "foundation_type"
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "manufactured_home"
                            }
                        },
                        "required": [
                            "dwelling_unit_type"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "systems": {
                        "properties": {
                            "hvac": {
                                "contains": {
                                    "properties": {
                                        "hvac_distribution": {
                                            "properties": {
                                                "duct": {
                                                    "contains": {
                                                        "properties": {
                                                            "location": {
                                                                "const": "manufactured_home_belly"
                                                            }
                                                        },
                                                        "required": [
                                                            "location"
                                                        ]
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "required": [
                                        "hvac_distribution"
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "about": {
                        "properties": {
                            "dwelling_unit_type": {
                                "const": "manufactured_home"
                            }
                        }
                    }
                }
            }
        }
    ],
    "$defs": {
        "hvac_distribution": {
            "type": "object",
            "description": "Inputs about the ducts",
            "required": [
                "leakage_method",
                "duct"
            ],
            "additionalItems": false,
            "properties": {
                "leakage_method": {
                    "type": "string",
                    "enum": [
                        "qualitative",
                        "quantitative"
                    ],
                    "description": "Method for duct leakage inputs"
                },
                "leakage_to_outside": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000,
                    "description": "Duct leakage to outside in CFM25 (only used if leakage_method is quantitative)"
                },
                "sealed": {
                    "type": "boolean",
                    "description": "Are the ducts sealed? (only used if leakage_method is qualitative)"
                },
                "duct": {
                    "type": "array",
                    "additionalItems": false,
                    "minItems": 1,
                    "maxItems": 3,
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "name": {
                                "type": "string",
                                "enum": [
                                    "duct1",
                                    "duct2",
                                    "duct3"
                                ],
                                "description": "Name of distribution system"
                            },
                            "location": {
                                "type": "string",
                                "oneOf": [
                                    {
                                        "const": "cond_space",
                                        "title": "Conditioned space"
                                    },
                                    {
                                        "const": "uncond_basement",
                                        "title": "Unconditioned basement"
                                    },
                                    {
                                        "const": "vented_crawl",
                                        "title": "Vented crawlspace"
                                    },
                                    {
                                        "const": "unvented_crawl",
                                        "title": "Unvented crawlspace / Unconditioned garage"
                                    },
                                    {
                                        "const": "uncond_attic",
                                        "title": "Unconditioned attic"
                                    },
                                    {
                                        "const": "under_slab",
                                        "title": "Under slab"
                                    },
                                    {
                                        "const": "exterior_wall",
                                        "title": "In exterior wall"
                                    },
                                    {
                                        "const": "manufactured_home_belly",
                                        "title": "Manufacturd Home Belly"
                                    },
                                    {
                                        "const": "outside",
                                        "title": "Outside"
                                    }
                                ],
                                "description": "Location of distribution system"
                            },
                            "fraction": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 1,
                                "description": "Fraction of total duct length"
                            },
                            "insulated": {
                                "type": "boolean",
                                "description": "Are the ducts insulated?"
                            }
                        },
                        "allOf": [
                            {
                                "required": [
                                    "name",
                                    "fraction"
                                ]
                            },
                            {
                                "if": {
                                    "properties": {
                                        "fraction": {
                                            "exclusiveMinimum": 0
                                        }
                                    },
                                    "required": [
                                        "fraction"
                                    ]
                                },
                                "then": {
                                    "required": [
                                        "location",
                                        "insulated"
                                    ]
                                }
                            }
                        ]
                    }
                }
            },
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "leakage_method": {
                                "const": "qualitative"
                            }
                        },
                        "required": [
                            "leakage_method"
                        ]
                    },
                    "then": {
                        "allOf": [
                            {
                                "required": [
                                    "sealed"
                                ]
                            },
                            {
                                "not": {
                                    "required": [
                                        "leakage_to_outside"
                                    ]
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "leakage_method": {
                                "const": "quantitative"
                            }
                        },
                        "required": [
                            "leakage_method"
                        ]
                    },
                    "then": {
                        "allOf": [
                            {
                                "required": [
                                    "leakage_to_outside"
                                ]
                            },
                            {
                                "not": {
                                    "required": [
                                        "sealed"
                                    ]
                                }
                            }
                        ]
                    }
                }
            ]
        }
    },
    "required": [
        "version",
        "address",
        "about",
        "zone",
        "systems"
    ]
}